<form name="groupForm" ng-submit="$ctrl.submit()" promise-btn>
  <div layout="column" layout-padding>
    <md-input-container>
      <label translate="GROUP.TITLE"></label>
      <input type="text" name="name" ng-model="$ctrl.data.name"
        required minlength="5" maxlength="80" autocomplete="off" groupname-Validator/>
      <div ng-messages="groupForm.name.$error">
        <div ng-message="minlength" translate="FORM.MINLENGTH" translate-values="{min:'5'}"></div>
        <div ng-message="unique" translate="FORM.UNIQUE"></div>
      </div>
    </md-input-container>

    <md-input-container>
      <label translate="GROUP.PASSWORD"></label>
      <input type="text" ng-model="$ctrl.data.password"/>
    </md-input-container>

    <md-autocomplete required
      md-selected-item="$ctrl.data.timezone"
      md-floating-label="{{ 'GROUP.TIMEZONE' | translate }}"
      md-search-text="tzsearch"
      md-items="tz in $ctrl.filterTimezones(tzsearch)">
      <span md-highlight-text="tzsearch">{{tz}}</span>
    </md-autocomplete>

    <markdown-input
      translation-label="GROUP.PUBLIC_DESCRIPTION"
      model="$ctrl.data.public_description">
    </markdown-input>

    <markdown-input
      translation-label="GROUP.DESCRIPTION_VERBOSE"
      model="$ctrl.data.description">
    </markdown-input>

    <map-picker data="$ctrl.data" placeholder="GROUP.ADDRESS"></map-picker>
  </div>

  <p>{{ $ctrl.error }}</p>
  <div layout="row" layout-align="end start">
    <md-button class="md-icon-button" ui-sref="^" ng-if="!$ctrl.isCreate">
      <i class="fa fa-times"></i>
    </md-button>
    <md-button type="submit" class="md-raised md-primary" ng-disabled="!groupForm.$valid">
      <i class="fa fa-check" ng-if="!$ctrl.isCreate"></i>
      <span translate="BUTTON.CREATE" ng-if="$ctrl.isCreate"></span>
    </md-button>
  </div>
</form>
